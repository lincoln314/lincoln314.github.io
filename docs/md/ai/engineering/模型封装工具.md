# cortex


# 需求梳理：

>:point_right: 目前有多种数字人模型，不限于数字人模型，需要将这些模型封装起来，做统一调度。借鉴github上关键词：Go TensorFlow/pytorch，来搜索go相关的智能项目

**需求：**
    wav2lip唇形合成模型、gfgan清晰化模型，将这两个模型整合，串联调度，推出视频流。
**需求拆分：**
- go封装两个wav2lip、gfgan两个模型，生成图片像素点，先不生成图片
- go像素点转换成图片
- go音频与图片合成视频流并推出

**技术要点：**
- go加载`tensorflow、pytorch`模型，并封装成api  -- 服务1
- go整合`ffmpeg`工具，像素转图片并推流   --服务2
- 两个服务之间采用grpc长连接

**关注点：**
- 引擎单次写入虚拟人的大小，KD目前设置audiowriteSize = 320000
- 形象质量设置  paramQuality：{5，3}，默认3
- 形象大小设置
- vid2vid模型路数
- KD 模型有四种：target_model、bs_model、vid2vid_model、mvs_bn_sll.irf，以irf后缀保存模型

![](https://lincoln314.github.io/docs/assets/img/ai/engineering/微信图片_20221213152619.jpg)


****
**:car:参考资料：**
<br/> 机器学习在线推理部署方案-Cortex：https://xujiahua.github.io/posts/20200416-cortex/
<br/>模型部署工具：https://github.com/aipredict/ai-deployment
<br/>golang加载tf模型：https://www.cnblogs.com/zhuchenglin/p/15089360.html

:fire:

****